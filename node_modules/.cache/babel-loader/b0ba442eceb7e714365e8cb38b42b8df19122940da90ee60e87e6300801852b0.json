{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _utils = require(\"@jimp/utils\");\n\n/**\n * Creates a circle out of an image.\n * @param {object} options (optional) r: radius of effect\n * @param {function(Error, Jimp)} cb (optional) a callback for when complete\n * @returns {Jimp} this for chaining of methods\n */\nvar _default = function _default() {\n  return {\n    fisheye: function fisheye() {\n      var _this = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        r: 2.5\n      };\n      var cb = arguments.length > 1 ? arguments[1] : undefined;\n      if (typeof options === \"function\") {\n        cb = options;\n        options = {\n          r: 2.5\n        };\n      }\n      var source = this.cloneQuiet();\n      var _source$bitmap = source.bitmap,\n        width = _source$bitmap.width,\n        height = _source$bitmap.height;\n      source.scanQuiet(0, 0, width, height, function (x, y) {\n        var hx = x / width;\n        var hy = y / height;\n        var r = Math.sqrt(Math.pow(hx - 0.5, 2) + Math.pow(hy - 0.5, 2));\n        var rn = 2 * Math.pow(r, options.r);\n        var cosA = (hx - 0.5) / r;\n        var sinA = (hy - 0.5) / r;\n        var newX = Math.round((rn * cosA + 0.5) * width);\n        var newY = Math.round((rn * sinA + 0.5) * height);\n        var color = source.getPixelColor(newX, newY);\n        _this.setPixelColor(color, x, y);\n      });\n      /* Set center pixel color, otherwise it will be transparent */\n\n      this.setPixelColor(source.getPixelColor(width / 2, height / 2), width / 2, height / 2);\n      if ((0, _utils.isNodePattern)(cb)) {\n        cb.call(this, null, this);\n      }\n      return this;\n    }\n  };\n};\nexports[\"default\"] = _default;\nmodule.exports = exports.default;","map":{"version":3,"names":["_utils","require","_default","fisheye","_this","options","arguments","length","undefined","r","cb","source","cloneQuiet","_source$bitmap","bitmap","width","height","scanQuiet","x","y","hx","hy","Math","sqrt","pow","rn","cosA","sinA","newX","round","newY","color","getPixelColor","setPixelColor","isNodePattern","call"],"sources":["/Users/wolfejam/HEXTRA-3/node_modules/@jimp/plugin-fisheye/src/index.js"],"sourcesContent":["import { isNodePattern } from \"@jimp/utils\";\n\n/**\n * Creates a circle out of an image.\n * @param {object} options (optional) r: radius of effect\n * @param {function(Error, Jimp)} cb (optional) a callback for when complete\n * @returns {Jimp} this for chaining of methods\n */\nexport default () => ({\n  fisheye(options = { r: 2.5 }, cb) {\n    if (typeof options === \"function\") {\n      cb = options;\n      options = { r: 2.5 };\n    }\n\n    const source = this.cloneQuiet();\n    const { width, height } = source.bitmap;\n\n    source.scanQuiet(0, 0, width, height, (x, y) => {\n      const hx = x / width;\n      const hy = y / height;\n      const r = Math.sqrt(Math.pow(hx - 0.5, 2) + Math.pow(hy - 0.5, 2));\n      const rn = 2 * Math.pow(r, options.r);\n      const cosA = (hx - 0.5) / r;\n      const sinA = (hy - 0.5) / r;\n      const newX = Math.round((rn * cosA + 0.5) * width);\n      const newY = Math.round((rn * sinA + 0.5) * height);\n      const color = source.getPixelColor(newX, newY);\n\n      this.setPixelColor(color, x, y);\n    });\n\n    /* Set center pixel color, otherwise it will be transparent */\n    this.setPixelColor(\n      source.getPixelColor(width / 2, height / 2),\n      width / 2,\n      height / 2\n    );\n\n    if (isNodePattern(cb)) {\n      cb.call(this, null, this);\n    }\n\n    return this;\n  },\n});\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;;AAEA;;;;;;eAMe,SAAAC,SAAA;EAAA,OAAO;IACpBC,OADoB,WAAAA,QAAA,EACc;MAAA,IAAAC,KAAA;MAAA,IAA1BC,OAA0B,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAhB;QAAEG,CAAC,EAAE;MAAL,CAAgB;MAAA,IAAJC,EAAI,GAAAJ,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;MAChC,IAAI,OAAOH,OAAP,KAAmB,UAAvB,EAAmC;QACjCK,EAAE,GAAGL,OAAL;QACAA,OAAO,GAAG;UAAEI,CAAC,EAAE;QAAL,CAAV;MACD;MAED,IAAME,MAAM,GAAG,KAAKC,UAAL,EAAf;MANgC,IAAAC,cAAA,GAONF,MAAM,CAACG,MAPD;QAOxBC,KAPwB,GAAAF,cAAA,CAOxBE,KAPwB;QAOjBC,MAPiB,GAAAH,cAAA,CAOjBG,MAPiB;MAShCL,MAAM,CAACM,SAAP,CAAiB,CAAjB,EAAoB,CAApB,EAAuBF,KAAvB,EAA8BC,MAA9B,EAAsC,UAACE,CAAD,EAAIC,CAAJ,EAAU;QAC9C,IAAMC,EAAE,GAAGF,CAAC,GAAGH,KAAf;QACA,IAAMM,EAAE,GAAGF,CAAC,GAAGH,MAAf;QACA,IAAMP,CAAC,GAAGa,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,GAAL,CAASJ,EAAE,GAAG,GAAd,EAAmB,CAAnB,IAAwBE,IAAI,CAACE,GAAL,CAASH,EAAE,GAAG,GAAd,EAAmB,CAAnB,CAAlC,CAAV;QACA,IAAMI,EAAE,GAAG,IAAIH,IAAI,CAACE,GAAL,CAASf,CAAT,EAAYJ,OAAO,CAACI,CAApB,CAAf;QACA,IAAMiB,IAAI,GAAG,CAACN,EAAE,GAAG,GAAN,IAAaX,CAA1B;QACA,IAAMkB,IAAI,GAAG,CAACN,EAAE,GAAG,GAAN,IAAaZ,CAA1B;QACA,IAAMmB,IAAI,GAAGN,IAAI,CAACO,KAAL,CAAW,CAACJ,EAAE,GAAGC,IAAL,GAAY,GAAb,IAAoBX,KAA/B,CAAb;QACA,IAAMe,IAAI,GAAGR,IAAI,CAACO,KAAL,CAAW,CAACJ,EAAE,GAAGE,IAAL,GAAY,GAAb,IAAoBX,MAA/B,CAAb;QACA,IAAMe,KAAK,GAAGpB,MAAM,CAACqB,aAAP,CAAqBJ,IAArB,EAA2BE,IAA3B,CAAd;QAEA1B,KAAI,CAAC6B,aAAL,CAAmBF,KAAnB,EAA0Bb,CAA1B,EAA6BC,CAA7B;MACD,CAZD;MAcA;;MACA,KAAKc,aAAL,CACEtB,MAAM,CAACqB,aAAP,CAAqBjB,KAAK,GAAG,CAA7B,EAAgCC,MAAM,GAAG,CAAzC,CADF,EAEED,KAAK,GAAG,CAFV,EAGEC,MAAM,GAAG,CAHX;MAMA,IAAI,IAAAhB,MAAA,CAAAkC,aAAA,EAAcxB,EAAd,CAAJ,EAAuB;QACrBA,EAAE,CAACyB,IAAH,CAAQ,IAAR,EAAc,IAAd,EAAoB,IAApB;MACD;MAED,OAAO,IAAP;IACD;EApCmB,CAAP;AAAA,C","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}