{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _utils = require(\"@jimp/utils\");\n\n/**\n * Applies a true Gaussian blur to the image (warning: this is VERY slow)\n * @param {number} r the pixel radius of the blur\n * @param {function(Error, Jimp)} cb (optional) a callback for when complete\n * @returns {Jimp} this for chaining of methods\n */\nvar _default = function _default() {\n  return {\n    gaussian: function gaussian(r, cb) {\n      // http://blog.ivank.net/fastest-gaussian-blur.html\n      if (typeof r !== \"number\") {\n        return _utils.throwError.call(this, \"r must be a number\", cb);\n      }\n      if (r < 1) {\n        return _utils.throwError.call(this, \"r must be greater than 0\", cb);\n      }\n      var rs = Math.ceil(r * 2.57); // significant radius\n\n      var range = rs * 2 + 1;\n      var rr2 = r * r * 2;\n      var rr2pi = rr2 * Math.PI;\n      var weights = [];\n      for (var y = 0; y < range; y++) {\n        weights[y] = [];\n        for (var x = 0; x < range; x++) {\n          var dsq = Math.pow(x - rs, 2) + Math.pow(y - rs, 2);\n          weights[y][x] = Math.exp(-dsq / rr2) / rr2pi;\n        }\n      }\n      for (var _y = 0; _y < this.bitmap.height; _y++) {\n        for (var _x = 0; _x < this.bitmap.width; _x++) {\n          var red = 0;\n          var green = 0;\n          var blue = 0;\n          var alpha = 0;\n          var wsum = 0;\n          for (var iy = 0; iy < range; iy++) {\n            for (var ix = 0; ix < range; ix++) {\n              var x1 = Math.min(this.bitmap.width - 1, Math.max(0, ix + _x - rs));\n              var y1 = Math.min(this.bitmap.height - 1, Math.max(0, iy + _y - rs));\n              var weight = weights[iy][ix];\n              var _idx = y1 * this.bitmap.width + x1 << 2;\n              red += this.bitmap.data[_idx] * weight;\n              green += this.bitmap.data[_idx + 1] * weight;\n              blue += this.bitmap.data[_idx + 2] * weight;\n              alpha += this.bitmap.data[_idx + 3] * weight;\n              wsum += weight;\n            }\n            var idx = _y * this.bitmap.width + _x << 2;\n            this.bitmap.data[idx] = Math.round(red / wsum);\n            this.bitmap.data[idx + 1] = Math.round(green / wsum);\n            this.bitmap.data[idx + 2] = Math.round(blue / wsum);\n            this.bitmap.data[idx + 3] = Math.round(alpha / wsum);\n          }\n        }\n      }\n      if ((0, _utils.isNodePattern)(cb)) {\n        cb.call(this, null, this);\n      }\n      return this;\n    }\n  };\n};\nexports[\"default\"] = _default;\nmodule.exports = exports.default;","map":{"version":3,"names":["_utils","require","_default","gaussian","r","cb","throwError","call","rs","Math","ceil","range","rr2","rr2pi","PI","weights","y","x","dsq","pow","exp","_y","bitmap","height","_x","width","red","green","blue","alpha","wsum","iy","ix","x1","min","max","y1","weight","_idx","data","idx","round","isNodePattern"],"sources":["/Users/wolfejam/HEXTRA-3/node_modules/@jimp/plugin-gaussian/src/index.js"],"sourcesContent":["import { isNodePattern, throwError } from \"@jimp/utils\";\n\n/**\n * Applies a true Gaussian blur to the image (warning: this is VERY slow)\n * @param {number} r the pixel radius of the blur\n * @param {function(Error, Jimp)} cb (optional) a callback for when complete\n * @returns {Jimp} this for chaining of methods\n */\nexport default () => ({\n  gaussian(r, cb) {\n    // http://blog.ivank.net/fastest-gaussian-blur.html\n    if (typeof r !== \"number\") {\n      return throwError.call(this, \"r must be a number\", cb);\n    }\n\n    if (r < 1) {\n      return throwError.call(this, \"r must be greater than 0\", cb);\n    }\n\n    const rs = Math.ceil(r * 2.57); // significant radius\n    const range = rs * 2 + 1;\n    const rr2 = r * r * 2;\n    const rr2pi = rr2 * Math.PI;\n\n    const weights = [];\n\n    for (let y = 0; y < range; y++) {\n      weights[y] = [];\n      for (let x = 0; x < range; x++) {\n        const dsq = (x - rs) ** 2 + (y - rs) ** 2;\n        weights[y][x] = Math.exp(-dsq / rr2) / rr2pi;\n      }\n    }\n\n    for (let y = 0; y < this.bitmap.height; y++) {\n      for (let x = 0; x < this.bitmap.width; x++) {\n        let red = 0;\n        let green = 0;\n        let blue = 0;\n        let alpha = 0;\n        let wsum = 0;\n\n        for (let iy = 0; iy < range; iy++) {\n          for (let ix = 0; ix < range; ix++) {\n            const x1 = Math.min(\n              this.bitmap.width - 1,\n              Math.max(0, ix + x - rs)\n            );\n            const y1 = Math.min(\n              this.bitmap.height - 1,\n              Math.max(0, iy + y - rs)\n            );\n            const weight = weights[iy][ix];\n            const idx = (y1 * this.bitmap.width + x1) << 2;\n\n            red += this.bitmap.data[idx] * weight;\n            green += this.bitmap.data[idx + 1] * weight;\n            blue += this.bitmap.data[idx + 2] * weight;\n            alpha += this.bitmap.data[idx + 3] * weight;\n            wsum += weight;\n          }\n\n          const idx = (y * this.bitmap.width + x) << 2;\n\n          this.bitmap.data[idx] = Math.round(red / wsum);\n          this.bitmap.data[idx + 1] = Math.round(green / wsum);\n          this.bitmap.data[idx + 2] = Math.round(blue / wsum);\n          this.bitmap.data[idx + 3] = Math.round(alpha / wsum);\n        }\n      }\n    }\n\n    if (isNodePattern(cb)) {\n      cb.call(this, null, this);\n    }\n\n    return this;\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}